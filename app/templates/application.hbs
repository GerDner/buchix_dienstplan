<h2 id='title'>Dienstplan</h2>

    <br>



<div class="navbar navbar-inverse">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-inverse-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">BuchiX</a>
    </div>
    <div class="navbar-collapse collapse navbar-inverse-collapse">
        <ul class="nav navbar-nav">
            <li>{{#link-to 'application'}}Home{{/link-to}}</li>
            <li>{{#link-to 'person'}}Neu{{/link-to}}</li>
            {{#if controller.session.isAuthenticated}}
            <li  {{action 'invalidateSession'}}><a href="#">Logout</a></li>


            {{/if}}
        </ul>
        {{#if controller.session.isAuthenticated}}
        {{else}}
            <form class="navbar-form navbar-left" role="search">
                <div class="form-group">
                    {{input value=controller.loginName class="form-control" placeholder="Login"}}
                    {{input value=controller.loginPassword class="form-control" placeholder="Passwort"}}
                </div>
                <button type="submit" class="btn btn-default" {{action 'login'}}>Login</button>
            </form>
        {{/if}}
        <div class="pull-right">
        {{#if controller.session.isAuthenticated}}
            <span class="label label-success">Logged In</span>
        {{else}}
            <span class="label label-danger">Logged Out</span>
        {{/if}}
        {{#if controller.saved}}
            <span class="label label-success">{{controller.saved}}</span>
        {{/if}}
        </div>




    </div>
</div>
{{outlet}}
<div class="row">
    <div class="centered"><span class="label label-default">Woche: {{kw}} | {{fullMo}} -> {{fullSo}}</span></div>
</div>
{{#link-to 'index' (query-params kw=prevKw year=prevYear)}}<button class="btn btn-default">letzte Woche</button>{{/link-to}}
{{#link-to 'index' (query-params kw=nextKw year=nextYear) class="pull-right"}}<button class="btn btn-default">nächste Woche</button>{{/link-to}}


<table class="table table-striped table-hover">
    <thead>
        <tr>
            <td>Name</td>
            <td>Mo {{mo}}</td>
            <td>Di {{di}}</td>
            <td>Mi {{mi}}</td>
            <td>Do {{do}}</td>
            <td>Fr {{fr}}</td>
            <td>Sa {{sa}}</td>
            <td>So {{so}}</td>
        </tr>
    </thead>
    <tbody>
        {{#if session.isAuthenticated}}
            {{#each top}}
            <tr>
                <td><button class="btn btn-xs btn-default" {{action "delete" this}}><span class="glyphicon glyphicon-remove"></span></button>

                    <span {{action 'editPerson' this}} class="pointer">{{lastname}}, {{name}}</span>
                </td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.mo}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.di}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.mi}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.do}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.fr}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.sa}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.so}}</td>
            </tr>
            {{/each}}
            {{#if service}}<tr class="active"><td>Service</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>{{/if}}
            {{#each service}}
            <tr>
                <td><button class="btn btn-xs btn-default" {{action "delete" this}}><span class="glyphicon glyphicon-remove"></span></button>

                    <span {{action 'editPerson' this}} class="pointer">{{lastname}}, {{name}}</span>
                </td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.mo}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.di}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.mi}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.do}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.fr}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.sa}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.so}}</td>
            </tr>
            {{/each}}
            {{#if theke}}<tr class="active"><td>Theke</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>{{/if}}
            {{#each theke}}
                <tr>
                    <td><button class="btn btn-xs btn-default" {{action "delete" this}}><span class="glyphicon glyphicon-remove"></span></button>

                        <span {{action 'editPerson' this}} class="pointer">{{lastname}}, {{name}}</span>

                    </td>
                    <td>{{input class="field" focus-out="autoSave" value=currentWeek.mo}}</td>
                    <td>{{input class="field" focus-out="autoSave" value=currentWeek.di}}</td>
                    <td>{{input class="field" focus-out="autoSave" value=currentWeek.mi}}</td>
                    <td>{{input class="field" focus-out="autoSave" value=currentWeek.do}}</td>
                    <td>{{input class="field" focus-out="autoSave" value=currentWeek.fr}}</td>
                    <td>{{input class="field" focus-out="autoSave" value=currentWeek.sa}}</td>
                    <td>{{input class="field" focus-out="autoSave" value=currentWeek.so}}</td>
                </tr>
            {{/each}}
            {{#if warm}}<tr class="active"><td>Küche Fest</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>{{/if}}
            {{#each warm}}
            <tr>
                <td><button class="btn btn-xs btn-default" {{action "delete" this}}><span class="glyphicon glyphicon-remove"></span></button>

                    <span {{action 'editPerson' this}} class="pointer">{{lastname}}, {{name}}</span>
                </td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.mo}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.di}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.mi}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.do}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.fr}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.sa}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.so}}</td>
            </tr>
            {{/each}}
            {{#if cold}}<tr class="active"><td>Küche Aushilfe</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>{{/if}}
            {{#each cold}}
            <tr>
                <td><button class="btn btn-xs btn-default" {{action "delete" this}}><span class="glyphicon glyphicon-remove"></span></button>

                    <span {{action 'editPerson' this}} class="pointer">{{lastname}}, {{name}}</span>
                </td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.mo}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.di}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.mi}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.do}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.fr}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.sa}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.so}}</td>
            </tr>
            {{/each}}
            {{#if brauerei}}<tr class="active"><td>Brauerei</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>{{/if}}
            {{#each brauerei}}
            <tr>
                <td><button class="btn btn-xs btn-default" {{action "delete" this}}><span class="glyphicon glyphicon-remove"></span></button>

                    <span {{action 'editPerson' this}} class="pointer">{{lastname}}, {{name}}</span>
                </td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.mo}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.di}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.mi}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.do}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.fr}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.sa}}</td>
                <td>{{input class="field" focus-out="autoSave" value=currentWeek.so}}</td>
            </tr>
            {{/each}}
            {{else}}









            {{#each top}}
            <tr>
                <td>{{lastname}}, {{name}}</td>
                <td>{{currentWeek.mo}}</td>
                <td>{{currentWeek.di}}</td>
                <td>{{currentWeek.mi}}</td>
                <td>{{currentWeek.do}}</td>
                <td>{{currentWeek.fr}}</td>
                <td>{{currentWeek.sa}}</td>
                <td>{{currentWeek.so}}</td>
            </tr>
            {{/each}}
            {{#if service}}<tr class="active"><td>Service</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>{{/if}}
            {{#each service}}
            <tr>
                <td>{{lastname}}, {{name}}</td>
                <td>{{currentWeek.mo}}</td>
                <td>{{currentWeek.di}}</td>
                <td>{{currentWeek.mi}}</td>
                <td>{{currentWeek.do}}</td>
                <td>{{currentWeek.fr}}</td>
                <td>{{currentWeek.sa}}</td>
                <td>{{currentWeek.so}}</td>
            </tr>
            {{/each}}
            {{#if theke}}<tr class="active"><td>Theke</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>{{/if}}
            {{#each theke}}
            <tr>
                <td>{{lastname}}, {{name}}</td>
                <td>{{currentWeek.mo}}</td>
                <td>{{currentWeek.di}}</td>
                <td>{{currentWeek.mi}}</td>
                <td>{{currentWeek.do}}</td>
                <td>{{currentWeek.fr}}</td>
                <td>{{currentWeek.sa}}</td>
                <td>{{currentWeek.so}}</td>
            </tr>
            {{/each}}
            {{#if warm}}<tr class="active"><td>Küche Fest</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>{{/if}}
            {{#each warm}}
            <tr>
                <td>{{lastname}}, {{name}}</td>
                <td>{{currentWeek.mo}}</td>
                <td>{{currentWeek.di}}</td>
                <td>{{currentWeek.mi}}</td>
                <td>{{currentWeek.do}}</td>
                <td>{{currentWeek.fr}}</td>
                <td>{{currentWeek.sa}}</td>
                <td>{{currentWeek.so}}</td>
            </tr>
            {{/each}}
            {{#if cold}}<tr class="active"><td>Küche Aushilfe</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>{{/if}}
            {{#each cold}}
            <tr>
                <td>{{lastname}}, {{name}}</td>
                <td>{{currentWeek.mo}}</td>
                <td>{{currentWeek.di}}</td>
                <td>{{currentWeek.mi}}</td>
                <td>{{currentWeek.do}}</td>
                <td>{{currentWeek.fr}}</td>
                <td>{{currentWeek.sa}}</td>
                <td>{{currentWeek.so}}</td>
            </tr>
            {{/each}}
            {{#if brauerei}}<tr class="active"><td>Küche Aushilfe</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>{{/if}}
            {{#each cobrauereild}}
            <tr>
                <td>{{lastname}}, {{name}}</td>
                <td>{{currentWeek.mo}}</td>
                <td>{{currentWeek.di}}</td>
                <td>{{currentWeek.mi}}</td>
                <td>{{currentWeek.do}}</td>
                <td>{{currentWeek.fr}}</td>
                <td>{{currentWeek.sa}}</td>
                <td>{{currentWeek.so}}</td>
            </tr>
            {{/each}}
        {{/if}}
    </tbody>
</table>



{{#link-to 'index' (query-params kw=prevKw year=prevYear)}}<button class="btn btn-default">letzte Woche</button>{{/link-to}}
{{#link-to 'index' (query-params kw=nextKw year=nextYear) class="pull-right"}}<button class="btn btn-default">nächste Woche</button>{{/link-to}}
